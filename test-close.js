const WebSocket = require('ws'); const ws = new WebSocket('ws://localhost:3001'); ws.on('open', function() { console.log('Connected to server'); const reqMsg = ["REQ", "1:", {"kinds":[1], "limit": 1}]; console.log('Sending REQ:', JSON.stringify(reqMsg)); ws.send(JSON.stringify(reqMsg)); setTimeout(() => { const closeMsg = ["CLOSE", "1:"]; console.log('Sending CLOSE:', JSON.stringify(closeMsg)); ws.send(JSON.stringify(closeMsg)); setTimeout(() => { console.log('Closing WebSocket connection'); ws.close(); }, 1000); }, 2000);}); ws.on('message', function(data) { console.log('Received:', data.toString()); }); ws.on('error', function(error) { console.error('WebSocket error:', error); }); ws.on('close', function() { console.log('Connection closed'); });
