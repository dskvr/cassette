# Boombox WASM Build Scripts

This directory contains scripts to help build and maintain the WASM bindings for the project.

## Scripts

### `process-wasm.js`

This script processes the WASM file generated by cargo build. It copies the WASM file from the sandwichs-favs build output to the boombox/wasm directory. If wasm-bindgen is installed, it will also generate JavaScript and TypeScript bindings.

Usage:
```bash
# From the project root
bun run build:wasm
```

### `update-wasm-bindings.js`

This script manually updates the WASM bindings if wasm-bindgen is not available or if the automatic binding generation fails. It adds method signatures to the TypeScript definition files and JavaScript implementations.

Usage:
```bash
# From the project root
bun run update:bindings
```

When prompted, enter the names of the methods to add, separated by commas. For example:
```
get_client_req_schema,get_relay_event_schema,get_relay_notice_schema
```

## Workflow

When modifying sandwichs-favs to add new exported methods:

1. Implement the new methods in sandwichs-favs
2. Run `bun run build:wasm` to build and process the WASM file
3. If wasm-bindgen is not installed or the binding generation fails, run `bun run update:bindings` to manually update the bindings
4. Update the tests to use the new methods
5. Run `bun test` to verify that everything is working

## Requirements

- Bun
- Cargo (Rust compiler)
- wasm-bindgen-cli (optional, for automatic binding generation) 